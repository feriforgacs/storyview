jQuery(document).ready(function($){let file_frame;$("#ff_storyview_blocks_list").sortable({placeholder:"ui-state-highlight",axis:"y"});let wp_media_post_id=wp.media.model.settings.post.id,set_to_post_id=wp_media_post_id,block_id=0;function setImage(image_url,block_id){$("#ff_storyview_block_item_"+block_id+" .ff_storyview_block_item_preview .preview_text").hide(),$("#ff_storyview_block_item_"+block_id+" .ff_storyview_block_item_preview .ff_storyview_block_item_content").css({"background-image":"url("+image_url+")"}),$("#ff_storyview_block_item_"+block_id+" .ff_storyview_block_item_preview .ff_storyview_block_item_content").show()}function setTextPosition(blockId){}function setTextBackground(blockId){}function setTextColor(blockId){}function setTextFontFamily(blockId){}function setTextFontColor(blockId){}$("#ff_storyview_blocks_list").on("click",".ff_storyview_image_upload",function(event){if(event.preventDefault(),block_id=$(this).data("blockid"),file_frame)return file_frame.uploader.uploader.param("post_id",set_to_post_id),void file_frame.open();wp.media.model.settings.post.id=set_to_post_id,(file_frame=wp.media.frames.file_frame=wp.media({title:"Select image",button:{text:"Use this image"},multiple:!1})).on("select",function(){attachment=file_frame.state().get("selection").first().toJSON(),wp.media.model.settings.post.id=wp_media_post_id,$("#ff_storyview_image_block_"+block_id).val(attachment.url),setImage(attachment.url,block_id)}),file_frame.open()}),$("a.add_media").on("click",function(){wp.media.model.settings.post.id=wp_media_post_id})});