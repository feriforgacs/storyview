jQuery(document).ready(function($){let file_frame;$(".custom-select").selectric({optionsItemBuilder:function(itemData){return itemData.value.length?'<span class="'+itemData.value+'">'+itemData.text+"</span>":itemData.text},onChange:function(element){let blockId=$(element).data("blockid"),selectedOption=$(element).val();element.classList.contains("font-family-select")?setTextFontFamily(blockId,selectedOption):element.classList.contains("font-size-select")&&setTextFontSize(blockId,selectedOption)}}),$("#ff_storyview_blocks_list").sortable({placeholder:"ui-state-highlight",axis:"y"});let wp_media_post_id=wp.media.model.settings.post.id,set_to_post_id=wp_media_post_id,blockId=0;function setImage(image_url,blockId){$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_preview .ff_storyview_block_item_content").css({"background-image":"url("+image_url+")"}),displayStoryPreview(blockId)}function setTextContent(blockId){let text=$("#ff_storyview_block_item_text_"+blockId).val();$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_content .block_item_text").text(text),displayStoryPreview(blockId)}function setTextPosition(blockId,position){$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_content").removeClass("ff_storyview_text_block_top ff_storyview_text_block_middle ff_storyview_text_block_bottom").addClass(position)}function setTextAlignment(blockId,alignment){$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_content").removeClass("ff_storyview_text_align_left ff_storyview_text_align_center ff_storyview_text_align_right").addClass(alignment)}function setTextBackgroundColor(blockId,backgroundColor){$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_content .block_item_text").removeClass("ff_storyview_block_background_black ff_storyview_block_background_gray ff_storyview_block_background_red ff_storyview_block_background_white ff_storyview_block_background_transparent").addClass(backgroundColor)}function setTextColor(blockId,fontColor){$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_content .block_item_text").removeClass("ff_storyview_block_color_black ff_storyview_block_color_gray ff_storyview_block_color_red ff_storyview_block_color_white").addClass(fontColor)}function setTextFontFamily(blockId,fontFamilyClass){$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_content .block_item_text").removeClass("arial courier roboto rounded montserrat lily").addClass(fontFamilyClass)}function setTextFontSize(blockId,fontSizeClass){$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_content .block_item_text").removeClass("f12 f14 f18 f24 f36").addClass(fontSizeClass)}function displayStoryPreview(blockId){$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_preview .preview_text").hide(),$("#ff_storyview_block_item_"+blockId+" .ff_storyview_block_item_preview .ff_storyview_block_item_content").css({display:"flex"})}function deleteStoryBlock(blockId){$("#ff_storyview_block_item_"+blockId).remove()}$("#ff_storyview_blocks_list").on("click",".ff_storyview_image_upload",function(event){if(event.preventDefault(),blockId=$(this).data("blockid"),file_frame)return file_frame.uploader.uploader.param("post_id",set_to_post_id),void file_frame.open();wp.media.model.settings.post.id=set_to_post_id,(file_frame=wp.media.frames.file_frame=wp.media({title:"Select image",button:{text:"Use this image"},multiple:!1})).on("select",function(){attachment=file_frame.state().get("selection").first().toJSON(),wp.media.model.settings.post.id=wp_media_post_id,$("#ff_storyview_image_block_"+blockId).val(attachment.url),setImage(attachment.url,blockId)}),file_frame.open()}),$("a.add_media").on("click",function(){wp.media.model.settings.post.id=wp_media_post_id}),$("#ff_storyview_blocks_list").on("keyup",".ff_storyview_block_item_text_textarea",function(){setTextContent($(this).data("blockid"))}),$("#ff_storyview_blocks_list").on("click",".ff_storyview_block_item_text_position_label",function(){let positionValue=$(this).children("input[type=radio]").val(),blockId=$(this).data("blockid");$('.ff_storyview_block_item_text_position_label.activ[data-blockid="'+blockId+'"]').removeClass("activ"),$(this).addClass("activ"),setTextPosition(blockId,positionValue)}),$("#ff_storyview_blocks_list").on("click",".ff_storyview_block_item_text_align_label",function(){let alignmentValue=$(this).children("input[type=radio]").val(),blockId=$(this).data("blockid");$('.ff_storyview_block_item_text_align_label.activ[data-blockid="'+blockId+'"]').removeClass("activ"),$(this).addClass("activ"),setTextAlignment(blockId,alignmentValue)}),$("#ff_storyview_blocks_list").on("click",".ff_storyview_block_item_text_background_color_label",function(){let backgroundColorValue=$(this).children("input[type=radio]").val(),blockId=$(this).data("blockid");$('.ff_storyview_block_item_text_background_color_label[data-blockid="'+blockId+'"] .activ').removeClass("activ"),$(this).children(".color-preview").addClass("activ"),setTextBackgroundColor(blockId,backgroundColorValue)}),$("#ff_storyview_blocks_list").on("click",".ff_storyview_block_item_text_font_color_label",function(){let fontColorValue=$(this).children("input[type=radio]").val(),blockId=$(this).data("blockid");$('.ff_storyview_block_item_text_font_color_label[data-blockid="'+blockId+'"] .activ').removeClass("activ"),$(this).children(".color-preview").addClass("activ"),setTextColor(blockId,fontColorValue)}),$("#ff_storyview_blocks_list").on("click",".ff_storyview_block_delete_button",function(){let blockId=$(this).data("blockid");confirm("Are you sure you want to remove the selected story block?")&&deleteStoryBlock(blockId)})});