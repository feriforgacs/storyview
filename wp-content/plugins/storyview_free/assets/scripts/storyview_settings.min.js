jQuery(document).ready(function($){let file_frame_amp_publisher_logo;function updateButtonPreview(){const backgroundType=$("#button_background_type").val();let background="";if("color"==backgroundType){const backgroundColor=$("#button_background_color").val();background=`background: ${backgroundColor};`}else{const gradientType="linear-gradient"==backgroundType?"linear-gradient":"radial-gradient",gradientColorStart=$("#button_background_gradient_start").val(),gradientColorEnd=$("#button_background_gradient_end").val();background=`background: ${gradientType}(${gradientColorStart}, ${gradientColorEnd});`}const fontFamily=$("#button_font_family").val();$("#button").removeClass("default arial courier roboto rounded lily montserrat"),$("#button").addClass(fontFamily);const fontColor="color: "+$("#button_font_color").val()+";",fontSizeTemp=$("#button_font_size").val();let fontSize="font-size: "+$("#button_font_size").val()+"px;";(fontSizeTemp.includes("p")||fontSizeTemp.includes("em")||fontSizeTemp.includes("%"))&&(fontSize="font-size: "+$("#button_font_size").val()+";");const textAlignment="text-align: "+$("#button_text_alignment").val()+";",borderWidthTemp=$("#button_border_width").val();let borderWidth="border-width: "+$("#button_border_width").val()+"px;";(borderWidthTemp.includes("p")||borderWidthTemp.includes("em")||borderWidthTemp.includes("%"))&&(borderWidth="border-width: "+$("#button_border_width").val()+";");const borderColor="border-color: "+$("#button_border_color").val()+";",paddingTemp=$("#button_padding").val();let padding="padding: "+$("#button_padding").val()+"px;";(paddingTemp.includes("p")||paddingTemp.includes("em")||paddingTemp.includes("%"))&&(padding="padding: "+$("#button_padding").val()+";");const customCSS=$("#button_custom_css").val().replace(/[\r\n\t]/g,""),buttonCSS=`${background} ${fontColor} ${fontSize} ${textAlignment} ${borderWidth} ${borderColor} ${padding} ${customCSS}`;$("#button").attr("style",buttonCSS)}$("#ff_storyview_amp_publisher_logo_upload").on("click",function(event){event.preventDefault(),file_frame_amp_publisher_logo?file_frame_amp_publisher_logo.open():((file_frame_amp_publisher_logo=wp.media.frames.file_frame_amp_publisher_logo=wp.media({title:"Select image",button:{text:"Use this image"},multiple:!1})).on("select",function(){attachment=file_frame_amp_publisher_logo.state().get("selection").first().toJSON(),$("#ff_storyview_amp_publisher_logo").val(attachment.url),$("#ff_storyview_amp_publisher_logo_preview_image").attr({src:attachment.url}),$("#ff_storyview_amp_publisher_logo_preview").show()}),file_frame_amp_publisher_logo.open())}),$("#ff_storyview_publisher_logo_delete_button").on("click",function(event){event.preventDefault(),$("#ff_storyview_amp_publisher_logo_preview").hide(),$("#ff_storyview_amp_publisher_logo").val("")}),$(".ff_storyview_block_item_text_position_label").on("click",function(){$(".ff_storyview_block_item_text_position_label.activ").removeClass("activ"),$(this).addClass("activ")}),$(".ff_storyview_block_item_text_align_label").on("click",function(){$(".ff_storyview_block_item_text_align_label.activ").removeClass("activ"),$(this).addClass("activ")}),$(".custom-select").selectric({optionsItemBuilder:function(itemData){return itemData.value.length?'<span class="'+itemData.value+'">'+itemData.text+"</span>":itemData.text}}),$("#ff_storyview_default_text_background_color").spectrum({clickoutFiresChange:!0,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!0,showPalette:!0,preferredFormat:"rgb",palette:[["rgba(0, 0, 0, .8)","rgba(51, 51, 51, .8)","rgba(201, 44, 44, .8)","rgba(255, 255, 255, .8)","rgba(255, 255, 255, 0)"]]}),$("#ff_storyview_default_text_font_color").spectrum({clickoutFiresChange:!0,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!0,showPalette:!0,preferredFormat:"rgb",palette:[["rgb(0, 0, 0)","rgb(51, 51, 51)","rgb(201, 44, 44)","rgb(255, 255, 255)"]]}),$("#ff_storyview_default_custom_block_background_color").spectrum({clickoutFiresChange:!0,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!0,showPalette:!0,preferredFormat:"rgb",palette:[["rgb(0, 0, 0)","rgb(51, 51, 51)","rgb(201, 44, 44)","rgb(255, 255, 255)"]]}),$("input.ff_storyview_button_type").on("change",function(){$("#ff_storyview_button_type_other").is(":checked")?$("#ff_storyview_button_types_other").show():$("#ff_storyview_button_types_other").hide()}),$("#ff_storyview_default_button_text").on("keyup",function(){let buttonText=$(this).val();$(".ff_storyview_button .ff_storyview_button_text").each(function(){$(this).text(buttonText)})}),$("#button_background_type").on("change",function(){"color"==$(this).val()?($("#color").removeClass("hidden"),$("#gradient").addClass("hidden")):($("#color").addClass("hidden"),$("#gradient").removeClass("hidden"))}),$("#button_background_color").spectrum({clickoutFiresChange:!0,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!0,showPalette:!0,preferredFormat:"rgb"}),$("#button_background_gradient_start").spectrum({clickoutFiresChange:!0,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!0,showPalette:!0,preferredFormat:"rgb"}),$("#button_background_gradient_end").spectrum({clickoutFiresChange:!0,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!0,showPalette:!0,preferredFormat:"rgb"}),$("#button_font_color").spectrum({clickoutFiresChange:!0,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!0,showPalette:!0,preferredFormat:"rgb"}),$("#button_border_color").spectrum({clickoutFiresChange:!0,showInput:!0,showInitial:!0,allowEmpty:!1,showAlpha:!0,showPalette:!0,preferredFormat:"rgb"}),$(".button_layout").on("change",function(e){const selectedLayout=$(this).val();$("#button").attr("class",`ff_storyview_button_layout_${selectedLayout}`)}),document.querySelector("#ff_storyview_button_designer")&&updateButtonPreview(),$(".button_custom_value").on("change",updateButtonPreview),$(".ff_storyview_button_designer_delete_button").on("click",function(e){e.preventDefault();const deleteURL=$(this).attr("href"),c=confirm("Are you sure you want to delete the button? You can't undo that.");c&&(window.top.location=deleteURL)})});